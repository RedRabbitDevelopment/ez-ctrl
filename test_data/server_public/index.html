<html>
  <head>
  
  </head>
  <body>
    <script type="text/javascript" src="/js/lib/lodash.min.js"></script>
    <script type="text/javascript" src="/js/lib/validator-min.js"></script>
    <script type="text/javascript" src="/js/lib/q.js"></script>
    <script type="text/javascript" src="/js/lib/ez-access.js"></script>
    <script type="text/javascript" src="/js/lib/ez-routes.js"></script>
    <script>
      assert = function(actual, expected) {
        if(actual !== expected) {
          throw new Error("Actual result differs from expected: '" + actual + "' ::: '" + expected + "'")
        }
      }
      EZAccess.User.query().then(function(response) {
        assert(response.length > 0, true);
      }).done();
      EZAccess.User.postLogin("yourdeveloperfriend", "password1").then(function(response) {
        assert(response, true);
      }).done();
      EZAccess.User.postLogin("yourdeveloperfriend", "password2").then(function(response) {
        assert(false, "Successful for some reason!");
      }, function(error) {
        assert(error.message, "Invalid username or password");
      }).done();
      EZAccess.User.postLogin("yourdeveloperfriend").then(function(response) {
        assert(false, "Successful for some reason!");
      }, function(error) {
        assert(error.message, "Validate");
        assert(error.errors.password.length, 1);
        assert(error.errors.password[0], 'is required');
      }).done();
      var batch = new EZAccess.Batch();
      batch.get('user', batch.User.get(1));
      batch.get('user2', batch.User.get(2));
      batch.flush().then(function(response) {
        assert(response.user.name, 'Shirle Tate');
        assert(response.user2.name, 'Baby Tate');
      }).done();
      batch = new EZAccess.Batch();
      batch.get({
        user: batch.User.get(1),
        user2: batch.User.get(2)
      });
      batch.flush().then(function(response) {
        assert(response.user.name, 'Shirle Tate');
        assert(response.user2.name, 'Baby Tate');
      }).done();
      batch = new EZAccess.Batch();
      batch.get({
        user: batch.User.get(1),
        user2: batch.User.get(2)
      });
      batch.get('user3', batch.User.get(3));
      batch.flush().then(function(response) {
        assert(response.user.name, 'Shirle Tate');
        assert(response.user2.name, 'Baby Tate');
        assert(response.user3.name, 'Nathan Tate');
      }).done();
    </script>
  </body>
</html>
